@main("APIStats - Home") {
<script type="text/javascript"> 
	var updateCounter = function(data) {
		var total = data.split(',')[0];
		var errors = data.split(',')[1];
		var percErrors = Math.ceil((errors / total * 100) * 100) / 100;
		console.log(data);
		$('#totalReqCount').html('<span>' + total + '</span>');
		$('#totalErrCount').html('<span>(' + percErrors + ' % errors)</span>'); 

	}
		
</script>
<iframe src="/countRequest"></iframe>
  <div class="container-fluid">
    <div class="row-fluid">
    	<div class="span12">
    		<div id="row-fluid">
					<div class="btn-group">
  						<button class="btn active">Minute</button>
  						<button class="btn">Hour</button>
  						<button class="btn">Day</button>
  						<button class="btn">Month</button>
					</div>
			</div>	
			<div id="row-fluid">
    			<div class="span12">
					<div class="span3">
	  					<span id="totalReqs">
	  						<h1>
	  							<div id="totalReqCount">0</div>
	  						</h1>
	  						<h4>requests</h4>
	  						<h6><div id="totalErrCount"></div></h6>
	  						<!--<span id="errorPercentage">(<div id="total_errors">0</div> % errors)</span>-->
	  					</span>
					</div>

					<div class="span9">
						<div id="row-fluid">
	  						<h6>Requests</h6>	
	  						<div id="reqChart"></div>
	  							@reqchart("#reqChart")
	  					</div>	
					</div>
				</div>
			</div>
			<div class="span4">	
	 		<!--
	 		<h6>Top 5 APIs</h6>
	  		<div id="top5pie"></div>
	  			//@top5pie("#top5pie")
	  			-->
		</div>
    </div>

    <div class="row-fluid">
      <div class="span12	">
		<div class="span4">
	  		<h6>Response Time (ms)</h6>
	    	<div id="respTimeChart"></div>
	    		@barchart("#respTimeChart")
        </div>
	<div class="span4">
	  <h6>Response Size (kb)</h6>
	    <div id="respSizeChart"></div>
	    @barchart("#respSizeChart")
        </div>
	<div class="span4">
	  <h6>Errors (%)</h6>
	  <div id="errorChart"></div>
	  @barchart("#errorChart")
        </div>
      </div>
    </div>

    <br/>

    <div class="row-fluid">
      <div class="span12">
		@apiTable()
      </div>
    </div>

</div>
</div>
}
